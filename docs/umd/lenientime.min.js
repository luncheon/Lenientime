(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?module.exports=t():typeof define==="function"&&define.amd?define(t):e.lenientime=t()})(this,function(){"use strict";function e(e,t,n){e=String(e);if(!t||!isFinite(t)||e.length>=t){return e}return r(t-e.length,n)+e}function t(e,t,n){e=String(e);if(!t||!isFinite(t)||e.length>=t){return e}return e+r(t-e.length,n)}function r(e,t){t=t===undefined||t===null||t===""?" ":String(t);var r=t;while(r.length<e){r+=t}return r.substr(0,e)}function n(){for(var e=0,t=arguments.length;e<t;++e){var r=arguments[e];if(typeof r==="number"){return r}if(typeof r==="string"){var n=parseFloat(r);if(isFinite(n)){return n}}}return undefined}var i=1e3;var o=i*60;var u=o*60;var s=u*12;var l=u*24;function f(e){var t=Math.floor(e)%l;return t>=0?t:t+l}function a(e){return e>=s?e-s:e}function c(e){return e<s?e+s:e}function p(e,t){e=f(e);switch(t&&String(t)[0].toLowerCase()){case"a":return a(e);case"p":return c(e);default:return e}}var h=function(e){e=e&&String(e).replace(/[\uff00-\uffef]/g,function(e){return String.fromCharCode(e.charCodeAt(0)-65248)}).replace(/\s/g,"").replace(/(a|p)\.?m?\.?$/i,function(e,t){return t.toLowerCase()});if(!e){return 0}var t=e.match(/^([0-9]{1,2})(?:([0-9]{2})(?:([0-9]{2})([0-9]*))?)?(a|p)?$/i)||e.match(/^([0-9]*\.[0-9]*)()()()(a|p)?$/i)||e.match(/^([+-]?[0-9]*\.?[0-9]*):([+-]?[0-9]*\.?[0-9]*)(?::([+-]?[0-9]*\.?[0-9]*))?()(a|p)?$/i);return t?p((t[1]?parseFloat(t[1])*u:0)+(t[2]?parseFloat(t[2])*o:0)+(t[3]?parseFloat(t[3])*i:0)+(t[4]?parseFloat("0."+t[4])*1e3:0),t[5]):NaN};var d=function(){function r(e){this._totalMilliseconds=e}r.of=function(e){if(e===undefined||e===null){return r.now()}else if(e instanceof r){return e}else{return new r(r._totalMillisecondsOf(e))}};r.now=function(){return new r(Date.now())};r.min=function(){return this.reduce(arguments,function(e,t){return e.invalid||t.isBefore(e)?t:e})};r.max=function(){return this.reduce(arguments,function(e,t){return e.invalid||t.isAfter(e)?t:e})};r._totalMillisecondsOf=function(e){if(e instanceof r){return e._totalMilliseconds}if(typeof e==="number"){return f(e)}if(typeof e==="string"){return h(e)}if(e instanceof Array){e={h:e[0],m:e[1],s:e[2],ms:e[3]}}if(e&&typeof e==="object"){var t=n(e.h,e.hour,e.hours,0)*u+n(e.m,e.minute,e.minutes,0)*o+n(e.s,e.second,e.seconds,0)*i+n(e.ms,e.S,e.millisecond,e.milliseconds,0);if(e.am===true||e.pm===false){return a(t)}if(e.pm===true||e.am===false){return c(t)}return p(t,e.a)}return NaN};r.reduce=function(e,t,n){if(n===void 0){n=r.INVALID}var i=n;for(var o=0,u=e.length;o<u;++o){var s=r.of(e[o]);if(s.valid){i=t(i,s,o,e)}}return i};Object.defineProperty(r.prototype,"hour",{get:function(){return Math.floor(this._totalMilliseconds/u)},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"hour12",{get:function(){return(this.hour+11)%12+1},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"minute",{get:function(){return Math.floor(this._totalMilliseconds%u/o)},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"second",{get:function(){return Math.floor(this._totalMilliseconds%o/i)},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"millisecond",{get:function(){return this._totalMilliseconds%i},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"am",{get:function(){return this.hour<12},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"pm",{get:function(){return this.hour>=12},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"hours",{get:function(){return this.hour},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"hours12",{get:function(){return this.hour12},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"minutes",{get:function(){return this.minute},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"seconds",{get:function(){return this.second},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"milliseconds",{get:function(){return this.millisecond},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"H",{get:function(){return this.invalid?"-":String(this.hour)},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"h",{get:function(){return this.invalid?"-":String(this.hour12)},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"k",{get:function(){return this.invalid?"-":String((this.hour+23)%24+1)},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"m",{get:function(){return this.invalid?"-":String(this.minute)},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"s",{get:function(){return this.invalid?"-":String(this.second)},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"S",{get:function(){return this.invalid?"-":String(Math.floor(this.millisecond/100))},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"SS",{get:function(){return this.invalid?"--":t(Math.floor(this.millisecond/10),2,"0")},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"SSS",{get:function(){return this.invalid?"---":t(this.millisecond,3,"0")},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"a",{get:function(){return this.invalid?"--":this.am?"am":"pm"},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"A",{get:function(){return this.invalid?"--":this.am?"AM":"PM"},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"aa",{get:function(){return this.invalid?"----":this.am?"a.m.":"p.m."},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"AA",{get:function(){return this.invalid?"----":this.am?"A.M.":"P.M."},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"HH",{get:function(){return this.invalid?"--":e(this.H,2,"0")},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"_H",{get:function(){return this.invalid?"--":e(this.H,2," ")},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"hh",{get:function(){return this.invalid?"--":e(this.h,2,"0")},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"_h",{get:function(){return this.invalid?"--":e(this.h,2," ")},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"kk",{get:function(){return this.invalid?"--":e(this.k,2,"0")},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"_k",{get:function(){return this.invalid?"--":e(this.k,2," ")},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"mm",{get:function(){return this.invalid?"--":e(this.m,2,"0")},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"_m",{get:function(){return this.invalid?"--":e(this.m,2," ")},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"ss",{get:function(){return this.invalid?"--":e(this.s,2,"0")},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"_s",{get:function(){return this.invalid?"--":e(this.s,2," ")},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"HHmm",{get:function(){return this.HH+":"+this.mm},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"HHmmss",{get:function(){return this.HHmm+":"+this.ss},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"HHmmssSSS",{get:function(){return this.HHmmss+"."+this.SSS},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"totalMilliseconds",{get:function(){return this._totalMilliseconds},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"totalSeconds",{get:function(){return Math.floor(this._totalMilliseconds/i)},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"totalMinutes",{get:function(){return Math.floor(this._totalMilliseconds/o)},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"valid",{get:function(){return 0<=this._totalMilliseconds&&this._totalMilliseconds<l},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"invalid",{get:function(){return!this.valid},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"startOfHour",{get:function(){return r.of(this._totalMilliseconds-this._totalMilliseconds%u)},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"startOfMinute",{get:function(){return r.of(this._totalMilliseconds-this._totalMilliseconds%o)},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"startOfSecond",{get:function(){return r.of(this._totalMilliseconds-this._totalMilliseconds%i)},enumerable:true,configurable:true});r.prototype.startOf=function(e){switch(e){case"hour":return this.startOfHour;case"minute":return this.startOfMinute;case"second":return this.startOfSecond;default:return this}};r.prototype.toString=function(){return this.HHmmssSSS};r.prototype.format=function(e){var t=this;return String(e).replace(/\\.|HH?|hh?|kk?|mm?|ss?|S{1,3}|AA?|aa?|_H|_h|_k|_m|_s/g,function(e){return e[0]==="\\"?e[1]:t[e]})};r.prototype.with=function(e){return r.of({h:n(e.h,e.hour,e.hours,this.hour),m:n(e.m,e.minute,e.minutes,this.minute),s:n(e.s,e.second,e.seconds,this.second),ms:n(e.ms,e.S,e.millisecond,e.milliseconds,this.millisecond),am:e.am===true||e.pm===false||(e.a==="am"?true:e.a==="pm"?false:undefined)})};r.prototype.plus=function(e){var t=r._totalMillisecondsOf(e);return t===0?this:r.of(this._totalMilliseconds+t)};r.prototype.minus=function(e){var t=r._totalMillisecondsOf(e);return t===0?this:r.of(this._totalMilliseconds-t)};r.prototype.equals=function(e){return this.compareTo(e)===0};r.prototype.compareTo=function(e){return this._totalMilliseconds-r._totalMillisecondsOf(e)};r.prototype.isBefore=function(e){return this.compareTo(e)<0};r.prototype.isBeforeOrEqual=function(e){return this.compareTo(e)<=0};r.prototype.isAfter=function(e){return this.compareTo(e)>0};r.prototype.isAfterOrEqual=function(e){return this.compareTo(e)>=0};r.prototype.isBetweenExclusive=function(e,t){return this.isAfter(e)&&this.isBefore(t)};r.prototype.isBetweenInclusive=function(e,t){return this.isAfterOrEqual(e)&&this.isBeforeOrEqual(t)};r.INVALID=new r(NaN);r.ZERO=new r(0);return r}();function b(e){return d.of(e)}b.prototype=d.prototype;return b});